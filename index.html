<!-- reference: https://gi-on-fhir.github.io/ -->
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Hyptertension Free</title>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="js/config.js"></script>
    <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
    <!-- Custom styles for this template -->
    <link href="index.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light style="background-color: blue" fixed-top">
        <a class="navbar-brand" href="#">Hypertension Free</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </nav>


    <div class="card-deck">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Welcome to Hypertension Free!</h5>
          <p class="card-text">Use this tool for advice from JNC based on your blood pressure trends.</p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Enter patient name</h5>
          <p class="card-text">Example patient names: Kris Mohr, Fletcher Howell.  Must exist in databse:
          https://r3.smarthealthit.org/Patient</p>

          <div class="center-div">
              <p>
                  Enter patient given name:
                  <input type="text" id="givenName" value="Susan">
              </p>
              <p>
                  Enter patient family name:
                  <input type="text" id="familyName" value="Clark">
              </p>
          </div>
          <div class="d-flex justify-content-center">
              <input onclick='getInformation();' type = 'button' value = 'Get Information'/>
        </div>
      </div>
    </div>

</div>
    <div id = "info" class="center-div">
</div>


    <!-- <div class="row">
      <div class="col-sm-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Welcome to Hypertension Free!</h5>
            <p class="card-text">Use this tool for advice from JNC based on your blood pressure trends.</p>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Enter patient name</h5>
            <p class="card-text">Example patient names: Kris Mohr, Fletcher Howell.  Must exist in databse:
            https://r3.smarthealthit.org/Patient</p>


            <div class="center-div">
                <p>
                    Enter patient given name:
                    <input type="text" id="givenName" value="Susan">
                </p>
                <p>
                    Enter patient family name:
                    <input type="text" id="familyName" value="Clark">
                </p>
            </div>
            <div class="d-flex justify-content-center">
                <input onclick='getInformation();' type = 'button' value = 'Get Information'/>
            </div>
            <div id = "info" class="center-div">
            </div>


          </div>
        </div>
      </div>
    </div> -->


<!-- <div class="content">
    <div class="card1" style="width: 54rem;">
      <div class="card-body">
        <h5 class="card-title">Welcome to Hypertension Free!</h5>
        <h6 class="card-subtitle mb-2 text-muted">Use this tool for advice from JNC based on your blood pressure trends.</h6>
        <p class="card-text">Example patient names: Kris Mohr, Fletcher Howell.  Must exist in databse:
        https://r3.smarthealthit.org/Patient</p>
        <a href="#" class="card-link">Card link</a>
        <a href="#" class="card-link">Another link</a>
      </div>
    </div>

    <div class="card2" style="width: 54rem;">
      <div class="card-body">
        <h5 class="card-title">Welcome to Hypertension Free!</h5>
        <h6 class="card-subtitle mb-2 text-muted">Use this tool for advice from JNC based on your blood pressure trends.</h6>
        <p class="card-text">Example patient names: Kris Mohr, Fletcher Howell.  Must exist in databse:
        https://r3.smarthealthit.org/Patient</p>
        <a href="#" class="card-link">Card link</a>
        <a href="#" class="card-link">Another link</a>
      </div>

</div> -->


    <!-- <div class="content">
        <main role="main" class="container">
            <div class="jumbotron">
                <div class="col">
                    <h1>Welcome to Hypertension Free!</h1>
                    <h4>
                        Use this tool for advice from JNC based on your blood pressure trends.
                    </h4>
                    <p>
                        Example patient names: Kris Mohr, Fletcher Howell.  Must exist in databse:
                        https://r3.smarthealthit.org/Patient
                    </p>
                </div>
            </div>
            <hr>
        </main>
    </div> -->

    <!-- <div class="center-div">
        <p>
            Enter patient given name:
            <input type="text" id="givenName" value="Susan">
        </p>
        <p>
            Enter patient family name:
            <input type="text" id="familyName" value="Clark">
        </p>
    </div>
    <div class="d-flex justify-content-center">
        <input onclick='getInformation();' type = 'button' value = 'Get Information'/>
    </div>
    <div id = "info" class="center-div">
    </div> -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
<script src="js/fhir-client.js"></script>
<script src="js/app.js"></script>

</html>

<!-- =======
<!DOCTYPE html>
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/smart-on-fhir/client-js/v0.1.1/dist/fhir-client.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.css"rel="stylesheet" type="text/css"></link>
<div id="chart"></div>
 </div>
  <button id=btn class="btn">patient</buton>
  <button id=btn2 class="btn">patient2</buton>
  <button id=btn3 class="btn">patient3</buton>
</div>

<script>

function id(idd){var demo = {
    serviceUrl: "https://fhir-open-api-dstu2.smarthealthit.org",        //allows you to connect to your smar server and query a patient
    patientId: idd  // josuah p willams hca-pat-55 1137192 9995679 99912345
};

// Create a FHIR client (server URL, patient id in `demo`)
var smart = FHIR.client(demo),
    pt = smart.patient;                        //you will then store your queryed patient in a varible
 var formatted = '';
// Create a patient's name that will go in the title
function name() {pt.read()
    .then(function (p) {
    var name = p.name[0];
    formatted = name.given.join(" ") + " " + name.family;
    $("#patient_name").text(formatted);
return formatted;
});}
name();

pt.read()
    .then(function (p) {
    var phone = p.telecom[0];
    var formatted = phone.value;
    $("#patient_phone").text(formatted);
});

var formatTime = d3.time.format("%e %B %Y");
 pt.api.search({type: "Observation", query: {code:  {$or: ["55284-4" ]}}}) // Query lonic code for systolic and diastolic pressure
    .then(function(bps) {
        var data = [];
        var datas = [];

        var x = [];
        var dia = 0
        var sys = 0;
       bps.data.entry.forEach(function(bp){            // how can we access diffrent datat from the model for a set of blood pressures do it for one blood pressure
              var blood = bp.resource.component;


x.push(bp.resource.effectiveDateTime)

              blood.forEach(function(b){

             if(b.code.coding[0].code == "8480-6" ){

            datas.push(b.valueQuantity.value)
               sys = b.valueQuantity.value
            }
             if(b.code.coding[0].code == "8462-4" ){

            data.push(b.valueQuantity.value)}
              dia = b.valueQuantity.value
              })
              console.log(sys+"/"+dia)

        });



var chart = c3.generate({
    title: {
  text: function (d) {name(); return formatted+"'s Blood Pressure Data"; }
},
    data: {
                x: 'x',
         json: {
           Systolic: datas,
            Diastolic: data,
            x: x
        },

    },

     subchart: {
        show: true
    },
    axis : {
     x : {
            type : 'timeseries',
            tick: {
              count: 6,
               format: '%m-%d-%Y',

            },
            label: { // ADD
              text: 'Date',
             position: 'outer-center'
        }

        },
        y : {
            tick: {
                format: d3.format("s")
            },
            label: { // ADD
          text: 'Blood Pressure mmHg',
          position: 'outer-middle'
        }
        },






    },
    tooltip: {
        format: {
            title: function (d) {var dr=formatTime(d); return 'BP: ' + dr; },
            value: function (value) {

                return format(value);
            }
//            value: d3.format(',') // apply this format to both y and y2
        }
    }
});


    });   }

    $(document).ready(function(){

        id("99912345")

         $('#btn').click( function(){
              id("1951076")

         })
          $('#btn2').click( function(){

             id("9995679")

         })
          $('#btn3').click( function(){

             id("99912345")


         })

    });

</script>
>>>>>>> af505b266f424277b851e59d384c4bcb7d4413a7 -->
